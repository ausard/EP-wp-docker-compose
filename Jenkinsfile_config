#!groovy
pipeline { 
   agent any   
   options{
      //Time display
      timestamps()
   }
   stages {
      // stage('Git') {
      //       steps {
      //           echo '> Checking out the Git version control ...'
      //           checkout scm
      //       }
      //   }
      stage('Git clone new config files for development') {
         steps {
               // cleanWs()               
            dir("/tmp/wp"){
               sh "rm -rf *"
               sh "docker-compose down"
               git 'https://github.com/ausard/EP_tsk2.git'                                    
            }
            
         }
      }
      stage('Copy config Wordpress'){
         steps{
            sh "cp wp-conf/config.php /wordpress/wp-config.php"
            }               
         }         
      }          
   }
   post{
      success{  
         dir("/tmp/wp"){
            sh "docker-compose build"
            sh "docker-compose up -d"
         }         
      }
   }      
}   
